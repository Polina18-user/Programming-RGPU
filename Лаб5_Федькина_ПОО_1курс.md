# Лабораторная работа №5
## Тема лабораторной работы: Файловый ввод-вывод
##  Задача 1. Чтение и вывод содержимого текстового файла
### Постановка задачи:
Напишите программу, которая открывает текстовый файл (например, “input.txt”) для чтения, считывает его построч
но с помощью функции fgets() и выводит каждую строку на стандартный вывод. Программа должна проверять,
 успешно ли открыт файл, и корректно закрывать его после чтения
 ### Математическая модель
 Отсутствует
### Список идентификаторов
|Имя|Тип|Смысл|
|---|---|-----|
|*fp|FILE|Указатель на переменную типа FILE|
|buffer|char|Перемнная, обозначающая пустую строку|
### Код программы 
```c
 #include <stdio.h>//подключение препроцессора ввод-вывод
 #include <stdlib.h>
    void readAndPrintFile() {//Функция для чтения и вывода файла
        FILE *fp = fopen("input.txt", "r");//указатель на переменную "типа" FILE кладется содержимое файла
        if (fp == NULL) {//Проверка: получилось ли прочитать файл
            perror("Ошибка открытия файла");
            exit(EXIT_FAILURE);//Безопасный выход из файла
            }
        char buffer[256];//Создание пустой строки, где будут храниться данные из файла
        while (fgets(buffer, sizeof(buffer), fp) != NULL) {//fgets(символьный массив, макс.длина строки, указатель на пер.тпа FILE)
            printf("%s", buffer);
        }
        fclose(fp);//Закрытие файла
    }
 int main(void) {
    readAndPrintFile();
    return 0;   
 }
```
### Результат

<img width="326" height="93" alt="1" src="https://github.com/user-attachments/assets/76e086c5-0949-4a42-a5bc-710240c9b054" />

##  Задача 2. Запись пользовательского ввода в текстовый файл
### Постановка задачи:
 Создайте программу, которая запрашивает у пользователя несколько строк текста, а затем записывает введённые дан
ные в файл “output.txt”. Используйте режим записи "w". После завершения записи файл закрывается, а программа
 выводит сообщение об успешном завершении
 ### Математическая модель
 Отсутствует
### Список идентификаторов
|Имя|Тип|Смысл|
|---|---|-----|
|*fp|FILE|Указатель на переменную типа FILE|
|line|char|Перемнная, обозначающая пустую строку|
### Код программы
```c
#include <stdio.h>
#include <stdlib.h>
void writeUserInputToFile() {//функция для записи данных в файл
    FILE *fp = fopen("output.txt", "w");//указатель на переменную типа FILE, создание пустого файлика
    if (fp == NULL) {//если не получилось создать файл (то есть в указетле нет адреса(ссылки) на новый файл, то выводим ошибку)
        perror("Ошибка создания файла");
        exit(EXIT_FAILURE);
    }
    char line[256];//создаем пустую строку, куда будем писать текст
    printf("Введите строки текста (для завершения введите пустую строку):\n");
    while (1) {//Бесконечный цикл (выполняется постоянно до тех пор, пока не будет встречен break) 
        fgets(line, sizeof(line), stdin);//stdin — это стандартный поток ввода. В него попадают все строки, вводимые пользователем. 
        // Если введена пустая строка (только символ новой строки), прекращаем ввод
        if (line[0] == '\n') break;
        fputs(line, fp);
    }
    fclose(fp);
    printf("Данные успешно записаны в output.txt\n");
 }
 int main(void) {
     writeUserInputToFile();
    return 0;
 }
```
### Результаты

<img width="696" height="166" alt="21" src="https://github.com/user-attachments/assets/9fa2690e-7c51-4360-ac3d-aa8f4937c19d" />

<img width="797" height="142" alt="22" src="https://github.com/user-attachments/assets/1f38051f-e7da-48d3-ac58-cefa135e9417" />


## Задача 3. Копирование содержимого одного файла в другой
### Постановка задачи:
Напишите программу, которая копирует содержимое файла “source.txt” в новый файл “destination.txt”. Программа
 должна открывать исходный файл в режиме чтения, а целевой — в режиме записи. Содержимое копируется блоками
 (например, по 256 байт) с использованием функций fread() и fwrite().
### Математическая модель
 Отсутствует
### Список идентификаторов
|Имя|Тип|Смысл|
|---|---|-----|
|*fp|FILE|Указатель на переменную типа FILE|
|line|char|Перемнная, обозначающая пустую строку|
### Код программы
```c
 #include <stdio.h>
 #include <stdlib.h>
 void copyFile(const char *source, const char *destination) {//На вход программы подаются ссылки на файйд исходный и новый файл
    FILE *src = fopen(source, "rb");//( r — открыть файл для чтения (read),b — открыть файл в бинарном режиме (binary).)
    if (src == NULL) {//Проверка, открылся ли файл
        perror("Ошибка открытия исходного файла");
        exit(EXIT_FAILURE);
    }
    FILE *dest = fopen(destination, "wb");//ц — открыть файл для написания (write),b — открыть файл в бинарном режиме (binary).
    if (dest == NULL) {//Проверка, создался ли файл
        perror("Ошибка создания файла назначения");
        fclose(src);
        exit(EXIT_FAILURE);
    }
    char buffer[256];//Пустая строка для ввода данных
    size_t bytes;
    while ((bytes = fread(buffer, 1, sizeof(buffer), src)) > 0) {//fread(массив, куда кладутся данные; размер каждого элемента в байтах:
        //max.кол-во для чтения; указатель на исходный файл)
        fwrite(buffer, 1, bytes, dest);//fwrite(массив, откуда берут данные; размер каждого эл.;кол-во символов в массиве;указатель на файл для записи)
    }
    fclose(src);
    fclose(dest);
    printf("Файл успешно скопирован из %s в %s\n", source, destination);
 }
 int main(void) {
    copyFile("source.txt", "destination.txt");
    return 0;
 }
```
### Результат

<img width="546" height="65" alt="31" src="https://github.com/user-attachments/assets/e71d1098-9863-466a-b6f8-3d1b1d340aab" />

<img width="393" height="130" alt="32" src="https://github.com/user-attachments/assets/8070a56f-0102-4a61-9dfe-f2f6e4ff81e7" />

<img width="375" height="102" alt="33" src="https://github.com/user-attachments/assets/c564cea2-649c-4732-9c41-1d6356f4ff68" />

## Задача 4. Подсчет строк, слов и символов в текстовом файле
### Постановка задачи
### Результат
Эта программа способона считать корректно только строчки из латниских букв. На русских буквах происходит сбой (см. ниже)





